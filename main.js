(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._header=e.headers}var n,r;return n=t,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialProfile",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._header}).then(this._checkResponse)}},{key:"getInitialCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._header}).then(this._checkResponse)}},{key:"patchProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._header,body:JSON.stringify({name:e.name,about:e.subName})}).then(this._checkResponse)}},{key:"addNewCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._header,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"deliteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._header}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._header}).then(this._checkResponse)}},{key:"deliteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._header}).then(this._checkResponse)}},{key:"patchAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._header,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.input)),this._buttonElement=this._formElement.querySelector(this._config.buttom)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState(this._inputList,this._buttonElement)}},{key:"_setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputError),n.textContent=t,n.classList.add(this._config.spanError)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputError),t.classList.remove(this._config.spanError),t.textContent=""}},{key:"_disableButton",value:function(e){e.classList.remove(this._config.buttonValid),e.classList.add(this._config.buttonInvalid),e.setAttribute("disabled",!0)}},{key:"_activateButton",value:function(e){e.classList.add(this._config.buttonValid),e.classList.remove(this._config.buttonInvalid),e.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?this._disableButton(t):this._activateButton(t)}},{key:"_hasInvalidInput",value:function(e){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.item,o=t.userData,i=t.handleCardClick,a=t.addLikeClick,u=t.removeLikeClick,c=t.handleDeliteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=r,this._profileId=o._id,this._template=document.querySelector(n).content,this._handleCardClick=i,this._handleDeliteIconClick=c,this._addLikeClick=a,this._removeLikeClick=u,this._element=this._template.querySelector(".element").cloneNode(!0),this._cardImage=this._element.querySelector(".element__image"),this._deliteIcon=this._element.querySelector(".element__delite"),this._like=this._element.querySelector(".element__like"),this._likeNumber=this._element.querySelector(".element__like-amount")}var t,n;return t=e,(n=[{key:"renderCards",value:function(){return this._element.querySelector(".element__text").textContent=this._card.name,this._cardImage.src=this._card.link,this._cardImage.alt=this._card.name,this._renderLike(),this._renderLikeNumber(),this._removeDeliteIcon(),this._setEventListeners(),this._element}},{key:"_renderLikeNumber",value:function(){this._likeNumber.textContent=this._card.likes.length}},{key:"_setEventListeners",value:function(){var e=this;this._like.addEventListener("click",(function(t){e._handleLikeClick(e)})),this._cardImage.addEventListener("click",this._handleCardClick)}},{key:"_setEventDelite",value:function(){this._deliteIcon.addEventListener("click",this._handleDeliteIconClick)}},{key:"_handleLikeClick",value:function(){this._like.classList.contains("element__like_active")?this._removeLikeClick():this._addLikeClick()}},{key:"toggleLike",value:function(){this._like.classList.toggle("element__like_active")}},{key:"_renderLike",value:function(){var e=this;this._card.likes.forEach((function(t){e._profileId===t._id&&e.toggleLike()}))}},{key:"renderNumberLike",value:function(e){this._likeNumber.textContent=e.likes.length}},{key:"subtractNumberLike",value:function(){this._likeNumber.textContent=Number(this._likeNumber.textContent)-1}},{key:"_removeDeliteIcon",value:function(){this._profileId!==this._card.owner._id?this._deliteIcon.remove():this._setEventDelite()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"renderItem",value:function(e){this._renderer(e)}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._button=this._popup.querySelector(".popup__button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("mousedown",this._handleOverlayClose.bind(this))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOverlayClose",value:function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}},{key:"renderLoading",value:function(e,t){this._button.textContent=e?"Сохранение...":t}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function _(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e,t){var n,r=e.submitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitForm=r,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"getInputValues",value:function(){return this._getInputValues()}},{key:"setEventListeners",value:function(){p(y(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitForm)}},{key:"close",value:function(){p(y(a.prototype),"close",this).call(this),this._form.reset()}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function w(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e,t){var n=this._popup.querySelector(".popup-image__image"),r=this._popup.querySelector(".popup-image__title");n.src=t,n.alt=e,r.textContent=e,k(L(a.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(t),this._profileSubName=document.querySelector(n),this._profileAvatar=document.querySelector(r),this._profile=o}var t,n;return t=e,(n=[{key:"renderInfo",value:function(){this._profileName.textContent=this._profile.name,this._profileSubName.textContent=this._profile.about,this._profileAvatar.src=this._profile.avatar}},{key:"removeAvatar",value:function(e){this._profileAvatar.src=e}},{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,subName:this._profileSubName.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._profileName.textContent=t,this._profileSubName.textContent=n}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function q(e,t){return q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},q(e,t)}function N(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function a(e,t){var n,r=e.submitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitForm=r,n._form=n._popup.querySelector(".popup__form"),n._id="",n._card="",n._cardElement="",n}return t=a,(n=[{key:"setEventListeners",value:function(){P(V(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitForm)}},{key:"setCard",value:function(e,t){this._id=e._id,this._card=e,this._cardElement=t}},{key:"getCardElement",value:function(){return this._cardElement}},{key:"getCard",value:function(){return this._card}},{key:"getIdCard",value:function(){return this._id}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l),D={form:".popup__form",input:".popup__input",buttom:".popup__button",inputError:"popup__input_type_error",spanError:"popup__input-error",buttonValid:"popup__button_valid",buttonInvalid:"popup__button_invalid",formCardAdd:"popup__form_cards-add"},T=document.querySelector(".profile__info-button"),A=document.querySelector(".profile__button"),U=document.querySelector(".profile__button-avatar"),B=document.querySelector(".popup_edit-profile"),F=document.querySelector(".popup_cards-add"),J=document.querySelector(".popup-avatar");function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=new r(D,B),z=new r(D,F),$=new r(D,J);M.enableValidation(),z.enableValidation(),$.enableValidation();var G=new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"535d3a03-0687-4a91-b587-5369f637f559","Content-Type":"application/json"}});Promise.all([G.getInitialProfile(),G.getInitialCard()]).then((function(e){return e})).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],c=new S(".profile__name",".profile__sub-name",".profile__avatar",o);c.renderInfo();var l=new v({submitForm:function(e){e.preventDefault(),l.renderLoading(!0),G.patchProfile(l.getInputValues()).then((function(e){c.setUserInfo(e),l.close()})).catch((function(e){console.log(e)})).finally((function(){l.renderLoading(!1,"Сохранить")}))}},".popup_edit-profile");l.setEventListeners();var s=new v({submitForm:function(e){e.preventDefault(),s.renderLoading(!0),G.addNewCard(s.getInputValues()).then((function(e){d.renderItem(e),s.close()})).catch((function(e){console.log(e)})).finally((function(){s.renderLoading(!1,"Создать")}))}},".popup_cards-add");s.setEventListeners();var f=new x({submitForm:function(e){e.preventDefault(),f.renderLoading(!0),G.deliteCard(f.getIdCard()).then((function(e){f.getCardElement().remove(),f.close()})).catch((function(e){console.log(e)})).finally((function(){f.renderLoading(!1,"Да")}))}},".popup-delite-card");f.setEventListeners();var p=new v({submitForm:function(e){e.preventDefault(),p.renderLoading(!0),G.patchAvatar(p.getInputValues().link).then((function(e){c.removeAvatar(e.avatar),p.close()})).catch((function(e){console.log(e)})).finally((function(){p.renderLoading(!1,"Сохранить")}))}},".popup-avatar");p.setEventListeners();var h=new C(".popup-image");h.setEventListeners();var d=new u({data:a,renderer:function(e){var t=new i({item:e,userData:o,handleCardClick:function(){h.open(e.name,e.link)},addLikeClick:function(){G.addLike(e._id).then((function(e){t.toggleLike(),t.renderNumberLike(e)})).catch((function(e){console.log(e)}))},removeLikeClick:function(){G.deliteLike(e._id).then((function(e){t.toggleLike(),t.renderNumberLike(e)})).catch((function(e){console.log(e)}))},handleDeliteIconClick:function(t){f.setCard(e,t.target.closest(".element")),f.open()}},".template-element"),n=t.renderCards();d.setItem(n)}},".elements__grid");T.addEventListener("click",(function(){l.setInputValues(c.getUserInfo()),M.resetValidation(),l.open()})),A.addEventListener("click",(function(){z.resetValidation(),s.open()})),U.addEventListener("click",(function(){$.resetValidation(),p.open()})),d.renderItems()})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXIgPSBjb25maWcuaGVhZGVycztcbiAgfVxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldEluaXRpYWxQcm9maWxlKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZCgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcGF0Y2hQcm9maWxlKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuc3ViTmFtZVxuICAgICAgfSlcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkTmV3Q2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rXG4gICAgICB9KVxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxpdGVDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhZGRMaWtlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxpdGVMaWtlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBwYXRjaEF2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBkYXRhXG4gICAgICB9KVxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dCkpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmJ1dHRvbSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KXtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5zcGFuRXJyb3IpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3IpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLnNwYW5FcnJvcik7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuYnV0dG9uVmFsaWQpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5idXR0b25JbnZhbGlkKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2FjdGl2YXRlQnV0dG9uKGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuYnV0dG9uVmFsaWQpO1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5idXR0b25JbnZhbGlkKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9hY3RpdmF0ZUJ1dHRvbihidXR0b25FbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoX2lucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7aXRlbSwgdXNlckRhdGEsIGhhbmRsZUNhcmRDbGljaywgYWRkTGlrZUNsaWNrLCByZW1vdmVMaWtlQ2xpY2ssIGhhbmRsZURlbGl0ZUljb25DbGlja30sIHNlbGVjdG9yVGVtcGxhdGUpIHtcbiAgICB0aGlzLl9jYXJkID0gaXRlbTtcbiAgICB0aGlzLl9wcm9maWxlSWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yVGVtcGxhdGUpLmNvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGl0ZUljb25DbGljayA9IGhhbmRsZURlbGl0ZUljb25DbGljaztcbiAgICB0aGlzLl9hZGRMaWtlQ2xpY2sgPSBhZGRMaWtlQ2xpY2s7XG4gICAgdGhpcy5fcmVtb3ZlTGlrZUNsaWNrID0gcmVtb3ZlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl90ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2RlbGl0ZUljb24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxpdGUnKTtcbiAgICB0aGlzLl9saWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgIHRoaXMuX2xpa2VOdW1iZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWFtb3VudCcpO1xuICB9XG5cbiAgcmVuZGVyQ2FyZHMgKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RleHQnKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmQubmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fY2FyZC5saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9jYXJkLm5hbWU7XG4gICAgdGhpcy5fcmVuZGVyTGlrZSgpO1xuICAgIHRoaXMuX3JlbmRlckxpa2VOdW1iZXIoKTtcbiAgICB0aGlzLl9yZW1vdmVEZWxpdGVJY29uKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlTnVtYmVyICgpIHtcbiAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZC5saWtlcy5sZW5ndGg7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuXG4gIF9zZXRFdmVudERlbGl0ZSgpIHtcbiAgICB0aGlzLl9kZWxpdGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRGVsaXRlSWNvbkNsaWNrKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQ2xpY2soKSB7XG4gICAgaWYgKCF0aGlzLl9saWtlLmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fbGlrZV9hY3RpdmUnKSkge1xuICAgICAgdGhpcy5fYWRkTGlrZUNsaWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2VDbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xuICB9XG5cbiAgX3JlbmRlckxpa2UoKSB7XG4gICAgdGhpcy5fY2FyZC5saWtlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaWYodGhpcy5fcHJvZmlsZUlkID09PSBpdGVtLl9pZCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUxpa2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlck51bWJlckxpa2UoaXRlbSkge1xuICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSBpdGVtLmxpa2VzLmxlbmd0aDtcbiAgfVxuXG4gIHN1YnRyYWN0TnVtYmVyTGlrZSgpIHtcbiAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gTnVtYmVyKHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQpIC0gMTtcbiAgfVxuXG4gIF9yZW1vdmVEZWxpdGVJY29uKCkge1xuICAgIGlmKHRoaXMuX3Byb2ZpbGVJZCAhPT0gdGhpcy5fY2FyZC5vd25lci5faWQpIHtcbiAgICAgIHRoaXMuX2RlbGl0ZUljb24ucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldEV2ZW50RGVsaXRlKCk7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe2RhdGEsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgc2V0SXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXApO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlLmJpbmQodGhpcykpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgZGVmYXVsdFRleHQpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBkZWZhdWx0VGV4dDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7UG9wdXB9IGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe3N1Ym1pdEZvcm19LCBwb3B1cCl7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGZvcm1WYWx1ZXMpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9zdWJtaXRGb3JtKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApe1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gIH1cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIGNvbnN0IHBvcHVwSW1hZ2VJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1pbWFnZV9faW1hZ2UnKTtcclxuICAgIGNvbnN0IHBvcHVwSW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1pbWFnZV9fdGl0bGUnKTtcclxuICAgIHBvcHVwSW1hZ2VJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgcG9wdXBJbWFnZUltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICBwb3B1cEltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZVN1Yk5hbWUsIHByb2ZpbGVBdmF0YXIsIHByb2ZpbGUpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xuICAgIHRoaXMuX3Byb2ZpbGVTdWJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlU3ViTmFtZSk7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhcik7XG4gICAgdGhpcy5fcHJvZmlsZSA9IHByb2ZpbGU7XG4gIH1cblxuICByZW5kZXJJbmZvKCkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fcHJvZmlsZS5uYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVTdWJOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fcHJvZmlsZS5hYm91dDtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IHRoaXMuX3Byb2ZpbGUuYXZhdGFyO1xuICB9XG5cbiAgcmVtb3ZlQXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLl9wcm9maWxlQXZhdGFyLnNyYyA9IGxpbms7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXG4gICAgICBzdWJOYW1lOiB0aGlzLl9wcm9maWxlU3ViTmFtZS50ZXh0Q29udGVudFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3Byb2ZpbGVTdWJOYW1lLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7c3VibWl0Rm9ybX0sIHBvcHVwKXtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgdGhpcy5faWQgPSAnJztcclxuICAgIHRoaXMuX2NhcmQgPSAnJztcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gJyc7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX3N1Ym1pdEZvcm0pO1xyXG4gIH1cclxuXHJcbiAgc2V0Q2FyZChjYXJkLCBlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pZCA9IGNhcmQuX2lkO1xyXG4gICAgdGhpcy5fY2FyZCA9IGNhcmQ7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkRWxlbWVudCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldENhcmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcclxuICB9XHJcblxyXG4gIGdldElkQ2FyZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybTogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0OiAnLnBvcHVwX19pbnB1dCcsXG4gIGJ1dHRvbTogJy5wb3B1cF9fYnV0dG9uJyxcbiAgaW5wdXRFcnJvcjogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgc3BhbkVycm9yOiAncG9wdXBfX2lucHV0LWVycm9yJyxcbiAgYnV0dG9uVmFsaWQ6ICdwb3B1cF9fYnV0dG9uX3ZhbGlkJyxcbiAgYnV0dG9uSW52YWxpZDogJ3BvcHVwX19idXR0b25faW52YWxpZCcsXG4gIGZvcm1DYXJkQWRkOiAncG9wdXBfX2Zvcm1fY2FyZHMtYWRkJ1xufTtcblxuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cFByb2ZpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tYXZhdGFyJyk7XG5cbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC1wcm9maWxlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9jYXJkcy1hZGQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1hdmF0YXInKTtcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaSc7XG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7Q2FyZH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQge1BvcHVwV2l0aEZvcm19IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7UG9wdXBXaXRoSW1hZ2V9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQge1VzZXJJbmZvfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IHtQb3B1cFdpdGhTdWJtaXR9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQnO1xuaW1wb3J0IHtjb25maWcsXG4gIGJ1dHRvbk9wZW5Qb3B1cFByb2ZpbCxcbiAgYnV0dG9uT3BlblBvcHVwQ2FyZHMsXG4gIGJ1dHRvbk9wZW5Qb3B1cEF2YXRhcixcbiAgcG9wdXBQcm9maWxlLFxuICBwb3B1cENhcmRzLFxuICBwb3B1cEF2YXRhcn0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuXG5jb25zdCB2YWxpZGF0ZVByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHBvcHVwUHJvZmlsZSk7XG5jb25zdCB2YWxpZGF0ZUNhcmRzID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cENhcmRzKTtcbmNvbnN0IHZhbGlkYXRlQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cEF2YXRhcik7XG5cbnZhbGlkYXRlUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0ZUNhcmRzLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRlQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc1MzVkM2EwMy0wNjg3LTRhOTEtYjU4Ny01MzY5ZjYzN2Y1NTknLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbFByb2ZpbGUoKSwgYXBpLmdldEluaXRpYWxDYXJkKCldKVxuLnRoZW4oKHJlcykgPT4ge1xuICByZXR1cm4gcmVzO1xufSlcbi50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuXG4gIGNvbnN0IHBvcHVwU2F2ZVByb2ZpbGUgPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX19uYW1lJyxcbiAgJy5wcm9maWxlX19zdWItbmFtZScsICcucHJvZmlsZV9fYXZhdGFyJywgdXNlckRhdGEpO1xuICBwb3B1cFNhdmVQcm9maWxlLnJlbmRlckluZm8oKTtcblxuICBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHN1Ym1pdEZvcm0oZXZ0KXtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgYXBpLnBhdGNoUHJvZmlsZShwb3B1cEVkaXRQcm9maWxlLmdldElucHV0VmFsdWVzKCkpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHBvcHVwU2F2ZVByb2ZpbGUuc2V0VXNlckluZm8ocmVzdWx0KTtcbiAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cEVkaXRQcm9maWxlLnJlbmRlckxvYWRpbmcoZmFsc2UsICfQodC+0YXRgNCw0L3QuNGC0YwnKTtcbiAgICAgIH0pO1xuICAgIH19LCcucG9wdXBfZWRpdC1wcm9maWxlJyk7XG4gIHBvcHVwRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICBjb25zdCBwb3B1cENhcmRBZGQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgc3VibWl0Rm9ybShldnQpe1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cENhcmRBZGQucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgIGFwaS5hZGROZXdDYXJkKHBvcHVwQ2FyZEFkZC5nZXRJbnB1dFZhbHVlcygpKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbShyZXN1bHQpO1xuICAgICAgICBwb3B1cENhcmRBZGQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBDYXJkQWRkLnJlbmRlckxvYWRpbmcoZmFsc2UsICfQodC+0LfQtNCw0YLRjCcpO1xuICAgICAgfSk7XG4gIH19LCcucG9wdXBfY2FyZHMtYWRkJyk7XG4gIHBvcHVwQ2FyZEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IHBvcHVwRGVsaXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoe1xuICAgIHN1Ym1pdEZvcm0oZXZ0KXtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXBEZWxpdGVDYXJkLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICBhcGkuZGVsaXRlQ2FyZChwb3B1cERlbGl0ZUNhcmQuZ2V0SWRDYXJkKCkpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBwb3B1cERlbGl0ZUNhcmQuZ2V0Q2FyZEVsZW1lbnQoKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgcG9wdXBEZWxpdGVDYXJkLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRGVsaXRlQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlLCAn0JTQsCcpO1xuICAgICAgfSk7XG4gICAgfX0sJy5wb3B1cC1kZWxpdGUtY2FyZCcpO1xuICBwb3B1cERlbGl0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICBjb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgc3VibWl0Rm9ybShldnQpe1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cEVkaXRBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgIGFwaS5wYXRjaEF2YXRhcihwb3B1cEVkaXRBdmF0YXIuZ2V0SW5wdXRWYWx1ZXMoKS5saW5rKVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBwb3B1cFNhdmVQcm9maWxlLnJlbW92ZUF2YXRhcihyZXN1bHQuYXZhdGFyKTtcbiAgICAgICAgcG9wdXBFZGl0QXZhdGFyLmNsb3NlKCk7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cEVkaXRBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSwgJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xuICAgICAgfSk7XG4gIH19LCcucG9wdXAtYXZhdGFyJyk7XG4gIHBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IGNhcmRDbGljayA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwLWltYWdlJyk7XG4gIGNhcmRDbGljay5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICBkYXRhOiBjYXJkcyxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgICAgIGl0ZW0sXG4gICAgICAgIHVzZXJEYXRhLFxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBjYXJkQ2xpY2sub3BlbihpdGVtLm5hbWUsIGl0ZW0ubGluayk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZExpa2VDbGljazogKCkgPT4ge1xuICAgICAgICAgIGFwaS5hZGRMaWtlKGl0ZW0uX2lkKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNhcmQudG9nZ2xlTGlrZSgpO1xuICAgICAgICAgICAgY2FyZC5yZW5kZXJOdW1iZXJMaWtlKHJlc3VsdCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlTGlrZUNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgYXBpLmRlbGl0ZUxpa2UoaXRlbS5faWQpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XG4gICAgICAgICAgICBjYXJkLnJlbmRlck51bWJlckxpa2UocmVzdWx0KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVEZWxpdGVJY29uQ2xpY2s6IChldnQpID0+IHtcbiAgICAgICAgICBwb3B1cERlbGl0ZUNhcmQuc2V0Q2FyZChpdGVtLCBldnQudGFyZ2V0LmNsb3Nlc3QoJy5lbGVtZW50JykpO1xuICAgICAgICAgIHBvcHVwRGVsaXRlQ2FyZC5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgfSwgJy50ZW1wbGF0ZS1lbGVtZW50Jyk7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQucmVuZGVyQ2FyZHMoKTtcbiAgICAgIGRlZmF1bHRDYXJkTGlzdC5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9XG4gIH0sICcuZWxlbWVudHNfX2dyaWQnKTtcblxuICBidXR0b25PcGVuUG9wdXBQcm9maWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcG9wdXBFZGl0UHJvZmlsZS5zZXRJbnB1dFZhbHVlcyhwb3B1cFNhdmVQcm9maWxlLmdldFVzZXJJbmZvKCkpO1xuICAgIHZhbGlkYXRlUHJvZmlsZS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcbiAgfSk7XG5cbiAgYnV0dG9uT3BlblBvcHVwQ2FyZHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVDYXJkcy5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBwb3B1cENhcmRBZGQub3BlbigpO1xuICB9KTtcblxuICBidXR0b25PcGVuUG9wdXBBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVBdmF0YXIucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgcG9wdXBFZGl0QXZhdGFyLm9wZW4oKTtcbiAgfSk7XG5cbiAgZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG59KVxuLmNhdGNoKChlcnIpID0+IHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn0pO1xuXG4vKiBhcGkuZ2V0SW5pdGlhbFByb2ZpbGUoKVxuICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG4gICAgY29uc3QgYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3ViLW5hbWUnKTtcbiAgICBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG4gICAgbmFtZS50ZXh0Q29udGVudCA9IHJlc3VsdC5uYW1lO1xuICAgIGFib3V0LnRleHRDb250ZW50ID0gcmVzdWx0LmFib3V0O1xuICAgIGF2YXRhci5zcmMgPSByZXN1bHQuYXZhdGFyO1xuICAgIHByb2ZpbGVJZCA9IHJlc3VsdC5faWQ7XG4gICAgcmV0dXJuIGFwaS5nZXRJbml0aWFsQ2FyZCgpO1xuICB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICBjb25zdCBwb3B1cFNhdmVQcm9maWxlID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fc3ViLW5hbWUnKTtcblxuICAgIGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgICBzdWJtaXRGb3JtKGV2dCl7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwb3B1cEVkaXRBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgYXBpLnBhdGNoUHJvZmlsZShwb3B1cEVkaXRQcm9maWxlLmdldElucHV0VmFsdWVzKCkpXG4gICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICBwb3B1cFNhdmVQcm9maWxlLnNldFVzZXJJbmZvKHJlc3VsdCk7XG4gICAgICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBwb3B1cEVkaXRBdmF0YXIucmVuZGVyTG9hZGluZyhmYWxzZSwgJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xuICAgICAgICB9KTtcbiAgICAgIH19LCcucG9wdXBfZWRpdC1wcm9maWxlJyk7XG4gICAgcG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgcG9wdXBDYXJkQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgc3VibWl0Rm9ybShldnQpe1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcG9wdXBDYXJkQWRkLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICAgIGFwaS5hZGROZXdDYXJkKHBvcHVwQ2FyZEFkZC5nZXRJbnB1dFZhbHVlcygpKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW0ocmVzdWx0KTtcbiAgICAgICAgICBwb3B1cENhcmRBZGQuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgcG9wdXBDYXJkQWRkLnJlbmRlckxvYWRpbmcoZmFsc2UsICfQodC+0LfQtNCw0YLRjCcpO1xuICAgICAgICB9KTtcbiAgICB9fSwnLnBvcHVwX2NhcmRzLWFkZCcpO1xuICAgIHBvcHVwQ2FyZEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgY29uc3QgcG9wdXBEZWxpdGVDYXJkID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCh7XG4gICAgICBzdWJtaXRGb3JtKGV2dCl7XG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBwb3B1cERlbGl0ZUNhcmQucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgYXBpLmRlbGl0ZUNhcmQocG9wdXBEZWxpdGVDYXJkLmdldElkQ2FyZCgpKVxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudCA9IHBvcHVwRGVsaXRlQ2FyZC5nZXRDYXJkRWxlbWVudCgpO1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgcG9wdXBEZWxpdGVDYXJkLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHBvcHVwRGVsaXRlQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlLCAn0JTQsCcpO1xuICAgICAgICB9KTtcbiAgICAgIH19LCcucG9wdXAtZGVsaXRlLWNhcmQnKTtcbiAgICBwb3B1cERlbGl0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgIHN1Ym1pdEZvcm0oZXZ0KXtcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHBvcHVwRWRpdEF2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgICBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG4gICAgICAgIGNvbnN0IGxpbmtBdmF0YXIgPSBwb3B1cEVkaXRBdmF0YXIuZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgICAgYXBpLnBhdGNoQXZhdGFyKGxpbmtBdmF0YXIubGluaylcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGF2YXRhci5zcmMgPSBsaW5rQXZhdGFyLmxpbms7XG4gICAgICAgICAgcG9wdXBFZGl0QXZhdGFyLmNsb3NlKCk7XG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgcG9wdXBFZGl0QXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UsICfQodC+0YXRgNCw0L3QuNGC0YwnKTtcbiAgICAgICAgfSk7XG4gICAgfX0sJy5wb3B1cC1hdmF0YXInKTtcbiAgICBwb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIGNvbnN0IGNhcmRDbGljayA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwLWltYWdlJyk7XG4gICAgY2FyZENsaWNrLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBkZWZhdWx0Q2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gICAgICBkYXRhOiByZXN1bHQsXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgICBpdGVtLFxuICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgY2FyZENsaWNrLm9wZW4oaXRlbS5uYW1lLCBpdGVtLmxpbmspO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlbGVtZW50X19saWtlX2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgIGFwaS5hZGRMaWtlKGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIGNhcmQucmVuZGVyTnVtYmVyTGlrZShyZXN1bHQpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXBpLmRlbGl0ZUxpa2UoaXRlbS5faWQpXG4gICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgY2FyZC5yZW5kZXJOdW1iZXJMaWtlKHJlc3VsdCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBoYW5kbGVEZWxpdGVJY29uQ2xpY2s6IChldnQpID0+IHtcbiAgICAgICAgICAgIHBvcHVwRGVsaXRlQ2FyZC5zZXRDYXJkKGl0ZW0sIGV2dC50YXJnZXQuY2xvc2VzdCgnLmVsZW1lbnQnKSk7XG4gICAgICAgICAgICBwb3B1cERlbGl0ZUNhcmQub3BlbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB9LCAnLnRlbXBsYXRlLWVsZW1lbnQnKTtcbiAgICAgICAgY2FyZC5yZW5kZXJMaWtlKHByb2ZpbGVJZCwgaXRlbS5saWtlcyk7XG4gICAgICAgIGNhcmQucmVtb3ZlRGVsaXRlSWNvbihwcm9maWxlSWQsIGl0ZW0ub3duZXIuX2lkKTtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmRzKCk7XG4gICAgICAgIGRlZmF1bHRDYXJkTGlzdC5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9LCAnLmVsZW1lbnRzX19ncmlkJyk7XG5cbiAgICBidXR0b25PcGVuUG9wdXBQcm9maWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB2YWxpZGF0ZVByb2ZpbGUucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKHBvcHVwU2F2ZVByb2ZpbGUuZ2V0VXNlckluZm8oKSk7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIGJ1dHRvbk9wZW5Qb3B1cENhcmRzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdmFsaWRhdGVDYXJkcy5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgIHBvcHVwQ2FyZEFkZC5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBidXR0b25PcGVuUG9wdXBBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB2YWxpZGF0ZUF2YXRhci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG59KTtcbiAqL1xuIl0sIm5hbWVzIjpbIkFwaSIsImNvbmZpZyIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVyIiwiaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsInN1Yk5hbWUiLCJsaW5rIiwiaWQiLCJhdmF0YXIiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImJ1dHRvbSIsIl9zZXRFdmVudExpc3RlbmVycyIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvciIsInRleHRDb250ZW50Iiwic3BhbkVycm9yIiwicmVtb3ZlIiwiYnV0dG9uRWxlbWVudCIsImJ1dHRvblZhbGlkIiwiYnV0dG9uSW52YWxpZCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImlucHV0TGlzdCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9hY3RpdmF0ZUJ1dHRvbiIsInNvbWUiLCJDYXJkIiwic2VsZWN0b3JUZW1wbGF0ZSIsIml0ZW0iLCJ1c2VyRGF0YSIsImhhbmRsZUNhcmRDbGljayIsImFkZExpa2VDbGljayIsInJlbW92ZUxpa2VDbGljayIsImhhbmRsZURlbGl0ZUljb25DbGljayIsIl9jYXJkIiwiX3Byb2ZpbGVJZCIsIl9pZCIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsaXRlSWNvbkNsaWNrIiwiX2FkZExpa2VDbGljayIsIl9yZW1vdmVMaWtlQ2xpY2siLCJfZWxlbWVudCIsImNsb25lTm9kZSIsIl9jYXJkSW1hZ2UiLCJfZGVsaXRlSWNvbiIsIl9saWtlIiwiX2xpa2VOdW1iZXIiLCJzcmMiLCJhbHQiLCJfcmVuZGVyTGlrZSIsIl9yZW5kZXJMaWtlTnVtYmVyIiwiX3JlbW92ZURlbGl0ZUljb24iLCJsaWtlcyIsImxlbmd0aCIsIl9oYW5kbGVMaWtlQ2xpY2siLCJjb250YWlucyIsInRvZ2dsZSIsInRvZ2dsZUxpa2UiLCJOdW1iZXIiLCJvd25lciIsIl9zZXRFdmVudERlbGl0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9idXR0b24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiaXNMb2FkaW5nIiwiZGVmYXVsdFRleHQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybSIsIl9zdWJtaXRGb3JtIiwiX2Zvcm0iLCJfZm9ybVZhbHVlcyIsInZhbHVlIiwiZm9ybVZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJwb3B1cEltYWdlSW1hZ2UiLCJwb3B1cEltYWdlVGl0bGUiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVN1Yk5hbWUiLCJwcm9maWxlQXZhdGFyIiwicHJvZmlsZSIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlU3ViTmFtZSIsIl9wcm9maWxlQXZhdGFyIiwiX3Byb2ZpbGUiLCJQb3B1cFdpdGhTdWJtaXQiLCJfY2FyZEVsZW1lbnQiLCJjYXJkIiwiZm9ybSIsImZvcm1DYXJkQWRkIiwiYnV0dG9uT3BlblBvcHVwUHJvZmlsIiwiYnV0dG9uT3BlblBvcHVwQ2FyZHMiLCJidXR0b25PcGVuUG9wdXBBdmF0YXIiLCJwb3B1cFByb2ZpbGUiLCJwb3B1cENhcmRzIiwicG9wdXBBdmF0YXIiLCJ2YWxpZGF0ZVByb2ZpbGUiLCJ2YWxpZGF0ZUNhcmRzIiwidmFsaWRhdGVBdmF0YXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldEluaXRpYWxQcm9maWxlIiwiZ2V0SW5pdGlhbENhcmQiLCJjYXJkcyIsInBvcHVwU2F2ZVByb2ZpbGUiLCJyZW5kZXJJbmZvIiwicG9wdXBFZGl0UHJvZmlsZSIsInJlbmRlckxvYWRpbmciLCJwYXRjaFByb2ZpbGUiLCJnZXRJbnB1dFZhbHVlcyIsInJlc3VsdCIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBDYXJkQWRkIiwiYWRkTmV3Q2FyZCIsImRlZmF1bHRDYXJkTGlzdCIsInJlbmRlckl0ZW0iLCJwb3B1cERlbGl0ZUNhcmQiLCJkZWxpdGVDYXJkIiwiZ2V0SWRDYXJkIiwiZ2V0Q2FyZEVsZW1lbnQiLCJwb3B1cEVkaXRBdmF0YXIiLCJwYXRjaEF2YXRhciIsInJlbW92ZUF2YXRhciIsImNhcmRDbGljayIsIm9wZW4iLCJhZGRMaWtlIiwicmVuZGVyTnVtYmVyTGlrZSIsImRlbGl0ZUxpa2UiLCJzZXRDYXJkIiwiY2xvc2VzdCIsImNhcmRFbGVtZW50IiwicmVuZGVyQ2FyZHMiLCJzZXRJdGVtIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRVc2VySW5mbyIsInJlc2V0VmFsaWRhdGlvbiIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==