(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._header=e.headers}var n,r;return n=t,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialProfile",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._header}).then(this._checkResponse)}},{key:"getInitialCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._header}).then(this._checkResponse)}},{key:"patchProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._header,body:JSON.stringify({name:e.name,about:e.subName})}).then(this._checkResponse)}},{key:"addNewCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._header,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"deliteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._header}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._header}).then(this._checkResponse)}},{key:"deliteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._header}).then(this._checkResponse)}},{key:"patchAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._header,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.input)),this._buttonElement=this._formElement.querySelector(this._config.buttom)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState(this._inputList,this._buttonElement)}},{key:"_setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputError),n.textContent=t,n.classList.add(this._config.spanError)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputError),t.classList.remove(this._config.spanError),t.textContent=""}},{key:"_disableButton",value:function(e){e.classList.remove(this._config.buttonValid),e.classList.add(this._config.buttonInvalid),e.setAttribute("disabled",!0)}},{key:"_activateButton",value:function(e){e.classList.add(this._config.buttonValid),e.classList.remove(this._config.buttonInvalid),e.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?this._disableButton(t):this._activateButton(t)}},{key:"_hasInvalidInput",value:function(e){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.item,o=t.userData,i=t.handleCardClick,a=t.addLikeClick,c=t.removeLikeClick,u=t.handleDeliteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=r,this._profileId=o._id,this._template=document.querySelector(n).content,this._handleCardClick=i,this._handleDeliteIconClick=u,this._addLikeClick=a,this._removeLikeClick=c,this._element=this._template.querySelector(".element").cloneNode(!0),this._cardImage=this._element.querySelector(".element__image"),this._deliteIcon=this._element.querySelector(".element__delite"),this._like=this._element.querySelector(".element__like"),this._likeNumber=this._element.querySelector(".element__like-amount")}var t,n;return t=e,(n=[{key:"renderCards",value:function(){return this._element.querySelector(".element__text").textContent=this._card.name,this._cardImage.src=this._card.link,this._cardImage.alt=this._card.name,this._renderLike(),this._renderLikeNumber(),this._removeDeliteIcon(),this._setEventListeners(),this._element}},{key:"_renderLikeNumber",value:function(){this._likeNumber.textContent=this._card.likes.length}},{key:"_setEventListeners",value:function(){var e=this;this._like.addEventListener("click",(function(t){e._handleLikeClick(e)})),this._cardImage.addEventListener("click",this._handleCardClick)}},{key:"_setEventDelite",value:function(){this._deliteIcon.addEventListener("click",this._handleDeliteIconClick)}},{key:"_handleLikeClick",value:function(){this._like.classList.contains("element__like_active")?this._removeLikeClick():this._addLikeClick()}},{key:"toggleLike",value:function(){this._like.classList.toggle("element__like_active")}},{key:"_renderLike",value:function(){var e=this;this._card.likes.forEach((function(t){e._profileId===t._id&&e.toggleLike()}))}},{key:"renderNumberLike",value:function(e){this._likeNumber.textContent=e.likes.length}},{key:"_removeDeliteIcon",value:function(){this._profileId!==this._card.owner._id?this._deliteIcon.remove():this._setEventDelite()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"renderItem",value:function(e){this._renderer(e)}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._button=this._popup.querySelector(".popup__button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popup.addEventListener("mousedown",this._handleOverlayClose.bind(this))}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOverlayClose",value:function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}},{key:"renderLoading",value:function(e,t){this._button.textContent=e?"Сохранение...":t}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=h(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(e,t){var n,r=e.submitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitForm=r,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"getInputValues",value:function(){return this._getInputValues()}},{key:"setEventListeners",value:function(){p(_(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitForm)}},{key:"close",value:function(){p(_(a.prototype),"close",this).call(this),this._form.reset()}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function w(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e,t){var n=this._popup.querySelector(".popup-image__image"),r=this._popup.querySelector(".popup-image__title");n.src=t,n.alt=e,r.textContent=e,k(L(a.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(t),this._profileSubName=document.querySelector(n),this._profileAvatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"setAvatar",value:function(e){this._profileAvatar.src=e}},{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,subName:this._profileSubName.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._profileName.textContent=t,this._profileSubName.textContent=n}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function q(e,t){return q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},q(e,t)}function V(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return V(this,e)});function a(e,t){var n,r=e.submitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitForm=r,n._form=n._popup.querySelector(".popup__form"),n._id="",n._card="",n._cardElement="",n}return t=a,(n=[{key:"setEventListeners",value:function(){P(D(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitForm)}},{key:"setCard",value:function(e,t){this._id=e._id,this._card=e,this._cardElement=t}},{key:"getCardElement",value:function(){return this._cardElement}},{key:"getCard",value:function(){return this._card}},{key:"getIdCard",value:function(){return this._id}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l),N={form:".popup__form",input:".popup__input",buttom:".popup__button",inputError:"popup__input_type_error",spanError:"popup__input-error",buttonValid:"popup__button_valid",buttonInvalid:"popup__button_invalid",formCardAdd:"popup__form_cards-add"},A=document.querySelector(".profile__info-button"),x=document.querySelector(".profile__button"),U=document.querySelector(".profile__button-avatar"),B=document.querySelector(".popup_edit-profile"),F=document.querySelector(".popup_cards-add"),J=document.querySelector(".popup-avatar");function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=new r(N,B),z=new r(N,F),$=new r(N,J);M.enableValidation(),z.enableValidation(),$.enableValidation();var G=new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"535d3a03-0687-4a91-b587-5369f637f559","Content-Type":"application/json"}});Promise.all([G.getInitialProfile(),G.getInitialCard()]).then((function(e){return e})).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],u=new S(".profile__name",".profile__sub-name",".profile__avatar");u.setUserInfo(o),u.setAvatar(o.avatar);var l=new v({submitForm:function(e){e.preventDefault(),l.renderLoading(!0),G.patchProfile(l.getInputValues()).then((function(e){u.setUserInfo(e),l.close()})).catch((function(e){console.log(e)})).finally((function(){l.renderLoading(!1,"Сохранить")}))}},".popup_edit-profile");l.setEventListeners();var s=new v({submitForm:function(e){e.preventDefault(),s.renderLoading(!0),G.addNewCard(s.getInputValues()).then((function(e){d.renderItem(e),s.close()})).catch((function(e){console.log(e)})).finally((function(){s.renderLoading(!1,"Создать")}))}},".popup_cards-add");s.setEventListeners();var f=new T({submitForm:function(e){e.preventDefault(),f.renderLoading(!0),G.deliteCard(f.getIdCard()).then((function(e){f.getCardElement().remove(),f.close()})).catch((function(e){console.log(e)})).finally((function(){f.renderLoading(!1,"Да")}))}},".popup-delite-card");f.setEventListeners();var p=new v({submitForm:function(e){e.preventDefault(),p.renderLoading(!0),G.patchAvatar(p.getInputValues().link).then((function(e){u.setAvatar(e.avatar),p.close()})).catch((function(e){console.log(e)})).finally((function(){p.renderLoading(!1,"Сохранить")}))}},".popup-avatar");p.setEventListeners();var h=new O(".popup-image");h.setEventListeners();var d=new c({data:a,renderer:function(e){var t=new i({item:e,userData:o,handleCardClick:function(){h.open(e.name,e.link)},addLikeClick:function(){G.addLike(e._id).then((function(e){t.toggleLike(),t.renderNumberLike(e)})).catch((function(e){console.log(e)}))},removeLikeClick:function(){G.deliteLike(e._id).then((function(e){t.toggleLike(),t.renderNumberLike(e)})).catch((function(e){console.log(e)}))},handleDeliteIconClick:function(t){f.setCard(e,t.target.closest(".element")),f.open()}},".template-element"),n=t.renderCards();d.setItem(n)}},".elements__grid");A.addEventListener("click",(function(){l.setInputValues(u.getUserInfo()),M.resetValidation(),l.open()})),x.addEventListener("click",(function(){z.resetValidation(),s.open()})),U.addEventListener("click",(function(){$.resetValidation(),p.open()})),d.renderItems()})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WnVGLEVBQUlnQyxRQUFRMUgsRUFBS1EsS0FDaEJsRSxNQUFLLFNBQUNpSyxHQUNMMUIsRUFBSzdDLGFBQ0w2QyxFQUFLOEMsaUJBQWlCcEIsTUFFdkJDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsT0FHaEJyRyxnQkFBaUIsV0FDZnNGLEVBQUlrQyxXQUFXNUgsRUFBS1EsS0FDbkJsRSxNQUFLLFNBQUNpSyxHQUNMMUIsRUFBSzdDLGFBQ0w2QyxFQUFLOEMsaUJBQWlCcEIsTUFFdkJDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsT0FHaEJwRyxzQkFBdUIsU0FBQ2hDLEdBQ3RCNkksRUFBZ0JXLFFBQVE3SCxFQUFNM0IsRUFBSWdGLE9BQU95RSxRQUFRLGFBQ2pEWixFQUFnQk8sU0FFZixxQkFDQ00sRUFBY2xELEVBQUttRCxjQUN6QmhCLEVBQWdCaUIsUUFBUUYsS0FFekIsbUJBRUgvQyxFQUFzQjVHLGlCQUFpQixTQUFTLFdBQzlDK0gsRUFBaUIrQixlQUFlbEMsRUFBaUJtQyxlQUNqRDdDLEVBQWdCOEMsa0JBQ2hCakMsRUFBaUJzQixVQUduQnhDLEVBQXFCN0csaUJBQWlCLFNBQVMsV0FDN0NtSCxFQUFjNkMsa0JBQ2R0QixFQUFhVyxVQUdmdkMsRUFBc0I5RyxpQkFBaUIsU0FBUyxXQUM5Q29ILEVBQWU0QyxrQkFDZmQsRUFBZ0JHLFVBR2xCVCxFQUFnQnFCLGlCQUVqQjdCLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlciA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gIH1cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbFByb2ZpbGUoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBwYXRjaFByb2ZpbGUoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5zdWJOYW1lXHJcbiAgICAgIH0pXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsaXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlclxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGl0ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcGF0Y2hBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGFcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXQpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuYnV0dG9tKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KXtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvcik7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5zcGFuRXJyb3IpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvcik7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLnNwYW5FcnJvcik7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50KSB7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5idXR0b25WYWxpZCk7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5idXR0b25JbnZhbGlkKTtcbiAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgfVxuXG4gIF9hY3RpdmF0ZUJ1dHRvbihidXR0b25FbGVtZW50KSB7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5idXR0b25WYWxpZCk7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5idXR0b25JbnZhbGlkKTtcbiAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlQnV0dG9uKGJ1dHRvbkVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoX2lucHV0TGlzdCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7aXRlbSwgdXNlckRhdGEsIGhhbmRsZUNhcmRDbGljaywgYWRkTGlrZUNsaWNrLCByZW1vdmVMaWtlQ2xpY2ssIGhhbmRsZURlbGl0ZUljb25DbGlja30sIHNlbGVjdG9yVGVtcGxhdGUpIHtcbiAgICB0aGlzLl9jYXJkID0gaXRlbTtcbiAgICB0aGlzLl9wcm9maWxlSWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgdGhpcy5fdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yVGVtcGxhdGUpLmNvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGl0ZUljb25DbGljayA9IGhhbmRsZURlbGl0ZUljb25DbGljaztcbiAgICB0aGlzLl9hZGRMaWtlQ2xpY2sgPSBhZGRMaWtlQ2xpY2s7XG4gICAgdGhpcy5fcmVtb3ZlTGlrZUNsaWNrID0gcmVtb3ZlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl90ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2RlbGl0ZUljb24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxpdGUnKTtcbiAgICB0aGlzLl9saWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgIHRoaXMuX2xpa2VOdW1iZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWFtb3VudCcpO1xuICB9XG5cbiAgcmVuZGVyQ2FyZHMgKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RleHQnKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmQubmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fY2FyZC5saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9jYXJkLm5hbWU7XG4gICAgdGhpcy5fcmVuZGVyTGlrZSgpO1xuICAgIHRoaXMuX3JlbmRlckxpa2VOdW1iZXIoKTtcbiAgICB0aGlzLl9yZW1vdmVEZWxpdGVJY29uKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlTnVtYmVyICgpIHtcbiAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZC5saWtlcy5sZW5ndGg7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuXG4gIF9zZXRFdmVudERlbGl0ZSgpIHtcbiAgICB0aGlzLl9kZWxpdGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRGVsaXRlSWNvbkNsaWNrKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQ2xpY2soKSB7XG4gICAgaWYgKCF0aGlzLl9saWtlLmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fbGlrZV9hY3RpdmUnKSkge1xuICAgICAgdGhpcy5fYWRkTGlrZUNsaWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlbW92ZUxpa2VDbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xuICB9XG5cbiAgX3JlbmRlckxpa2UoKSB7XG4gICAgdGhpcy5fY2FyZC5saWtlcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaWYodGhpcy5fcHJvZmlsZUlkID09PSBpdGVtLl9pZCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUxpa2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlck51bWJlckxpa2UoaXRlbSkge1xuICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSBpdGVtLmxpa2VzLmxlbmd0aDtcbiAgfVxuXG4gIF9yZW1vdmVEZWxpdGVJY29uKCkge1xuICAgIGlmKHRoaXMuX3Byb2ZpbGVJZCAhPT0gdGhpcy5fY2FyZC5vd25lci5faWQpIHtcbiAgICAgIHRoaXMuX2RlbGl0ZUljb24ucmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldEV2ZW50RGVsaXRlKCk7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtkYXRhLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVySXRlbShpdGVtKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gIH1cblxuICBzZXRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XHJcbiAgfVxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlLmJpbmQodGhpcykpO1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfaGFuZGxlT3ZlcmxheUNsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkge1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgZGVmYXVsdFRleHQpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IGRlZmF1bHRUZXh0O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1BvcHVwfSBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHtzdWJtaXRGb3JtfSwgcG9wdXApe1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgICB0aGlzLl9zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhmb3JtVmFsdWVzKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fc3VibWl0Rm9ybSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtQb3B1cH0gZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApe1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgfVxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICBjb25zdCBwb3B1cEltYWdlSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtaW1hZ2VfX2ltYWdlJyk7XG4gICAgY29uc3QgcG9wdXBJbWFnZVRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLWltYWdlX190aXRsZScpO1xuICAgIHBvcHVwSW1hZ2VJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHBvcHVwSW1hZ2VJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHBvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZVN1Yk5hbWUsIHByb2ZpbGVBdmF0YXIpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xuICAgIHRoaXMuX3Byb2ZpbGVTdWJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlU3ViTmFtZSk7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhcik7XG4gIH1cblxuICBzZXRBdmF0YXIobGluaykge1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gbGluaztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHN1Yk5hbWU6IHRoaXMuX3Byb2ZpbGVTdWJOYW1lLnRleHRDb250ZW50XG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZVN1Yk5hbWUudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioe3N1Ym1pdEZvcm19LCBwb3B1cCl7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pZCA9ICcnO1xuICAgIHRoaXMuX2NhcmQgPSAnJztcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9ICcnO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX3N1Ym1pdEZvcm0pO1xuICB9XG5cbiAgc2V0Q2FyZChjYXJkLCBlbGVtZW50KSB7XG4gICAgdGhpcy5faWQgPSBjYXJkLl9pZDtcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZXRDYXJkKCkge1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgZ2V0SWRDYXJkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dDogJy5wb3B1cF9faW5wdXQnLFxyXG4gIGJ1dHRvbTogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbnB1dEVycm9yOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIHNwYW5FcnJvcjogJ3BvcHVwX19pbnB1dC1lcnJvcicsXHJcbiAgYnV0dG9uVmFsaWQ6ICdwb3B1cF9fYnV0dG9uX3ZhbGlkJyxcclxuICBidXR0b25JbnZhbGlkOiAncG9wdXBfX2J1dHRvbl9pbnZhbGlkJyxcclxuICBmb3JtQ2FyZEFkZDogJ3BvcHVwX19mb3JtX2NhcmRzLWFkZCdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBQcm9maWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW5mby1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uT3BlblBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1hdmF0YXInKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC1wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2NhcmRzLWFkZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtYXZhdGFyJyk7XHJcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaSc7XG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7Q2FyZH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQge1BvcHVwV2l0aEZvcm19IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7UG9wdXBXaXRoSW1hZ2V9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQge1VzZXJJbmZvfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IHtQb3B1cFdpdGhTdWJtaXR9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQnO1xuaW1wb3J0IHtjb25maWcsXG4gIGJ1dHRvbk9wZW5Qb3B1cFByb2ZpbCxcbiAgYnV0dG9uT3BlblBvcHVwQ2FyZHMsXG4gIGJ1dHRvbk9wZW5Qb3B1cEF2YXRhcixcbiAgcG9wdXBQcm9maWxlLFxuICBwb3B1cENhcmRzLFxuICBwb3B1cEF2YXRhcn0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuXG5jb25zdCB2YWxpZGF0ZVByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHBvcHVwUHJvZmlsZSk7XG5jb25zdCB2YWxpZGF0ZUNhcmRzID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cENhcmRzKTtcbmNvbnN0IHZhbGlkYXRlQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwb3B1cEF2YXRhcik7XG5cbnZhbGlkYXRlUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0ZUNhcmRzLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRlQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc1MzVkM2EwMy0wNjg3LTRhOTEtYjU4Ny01MzY5ZjYzN2Y1NTknLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0SW5pdGlhbFByb2ZpbGUoKSwgYXBpLmdldEluaXRpYWxDYXJkKCldKVxuLnRoZW4oKHJlcykgPT4ge1xuICByZXR1cm4gcmVzO1xufSlcbi50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xuXG4gIGNvbnN0IHBvcHVwU2F2ZVByb2ZpbGUgPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX19uYW1lJyxcbiAgJy5wcm9maWxlX19zdWItbmFtZScsICcucHJvZmlsZV9fYXZhdGFyJyk7XG4gIHBvcHVwU2F2ZVByb2ZpbGUuc2V0VXNlckluZm8odXNlckRhdGEpO1xuICBwb3B1cFNhdmVQcm9maWxlLnNldEF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuXG4gIGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgc3VibWl0Rm9ybShldnQpe1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICBhcGkucGF0Y2hQcm9maWxlKHBvcHVwRWRpdFByb2ZpbGUuZ2V0SW5wdXRWYWx1ZXMoKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgcG9wdXBTYXZlUHJvZmlsZS5zZXRVc2VySW5mbyhyZXN1bHQpO1xuICAgICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRWRpdFByb2ZpbGUucmVuZGVyTG9hZGluZyhmYWxzZSwgJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xuICAgICAgfSk7XG4gICAgfX0sJy5wb3B1cF9lZGl0LXByb2ZpbGUnKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IHBvcHVwQ2FyZEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICBzdWJtaXRGb3JtKGV2dCl7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwQ2FyZEFkZC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgYXBpLmFkZE5ld0NhcmQocG9wdXBDYXJkQWRkLmdldElucHV0VmFsdWVzKCkpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGRlZmF1bHRDYXJkTGlzdC5yZW5kZXJJdGVtKHJlc3VsdCk7XG4gICAgICAgIHBvcHVwQ2FyZEFkZC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cENhcmRBZGQucmVuZGVyTG9hZGluZyhmYWxzZSwgJ9Ch0L7Qt9C00LDRgtGMJyk7XG4gICAgICB9KTtcbiAgfX0sJy5wb3B1cF9jYXJkcy1hZGQnKTtcbiAgcG9wdXBDYXJkQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgY29uc3QgcG9wdXBEZWxpdGVDYXJkID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCh7XG4gICAgc3VibWl0Rm9ybShldnQpe1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBwb3B1cERlbGl0ZUNhcmQucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgIGFwaS5kZWxpdGVDYXJkKHBvcHVwRGVsaXRlQ2FyZC5nZXRJZENhcmQoKSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHBvcHVwRGVsaXRlQ2FyZC5nZXRDYXJkRWxlbWVudCgpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBwb3B1cERlbGl0ZUNhcmQuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBEZWxpdGVDYXJkLnJlbmRlckxvYWRpbmcoZmFsc2UsICfQlNCwJyk7XG4gICAgICB9KTtcbiAgICB9fSwnLnBvcHVwLWRlbGl0ZS1jYXJkJyk7XG4gIHBvcHVwRGVsaXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICBzdWJtaXRGb3JtKGV2dCl7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICAgICAgYXBpLnBhdGNoQXZhdGFyKHBvcHVwRWRpdEF2YXRhci5nZXRJbnB1dFZhbHVlcygpLmxpbmspXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIHBvcHVwU2F2ZVByb2ZpbGUuc2V0QXZhdGFyKHJlc3VsdC5hdmF0YXIpO1xuICAgICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRWRpdEF2YXRhci5yZW5kZXJMb2FkaW5nKGZhbHNlLCAn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gICAgICB9KTtcbiAgfX0sJy5wb3B1cC1hdmF0YXInKTtcbiAgcG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgY29uc3QgY2FyZENsaWNrID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXAtaW1hZ2UnKTtcbiAgY2FyZENsaWNrLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIGRhdGE6IGNhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgdXNlckRhdGEsXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICAgIGNhcmRDbGljay5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkTGlrZUNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgYXBpLmFkZExpa2UoaXRlbS5faWQpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XG4gICAgICAgICAgICBjYXJkLnJlbmRlck51bWJlckxpa2UocmVzdWx0KTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVMaWtlQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBhcGkuZGVsaXRlTGlrZShpdGVtLl9pZClcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2UoKTtcbiAgICAgICAgICAgIGNhcmQucmVuZGVyTnVtYmVyTGlrZShyZXN1bHQpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZURlbGl0ZUljb25DbGljazogKGV2dCkgPT4ge1xuICAgICAgICAgIHBvcHVwRGVsaXRlQ2FyZC5zZXRDYXJkKGl0ZW0sIGV2dC50YXJnZXQuY2xvc2VzdCgnLmVsZW1lbnQnKSk7XG4gICAgICAgICAgcG9wdXBEZWxpdGVDYXJkLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgICB9LCAnLnRlbXBsYXRlLWVsZW1lbnQnKTtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5yZW5kZXJDYXJkcygpO1xuICAgICAgZGVmYXVsdENhcmRMaXN0LnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH1cbiAgfSwgJy5lbGVtZW50c19fZ3JpZCcpO1xuXG4gIGJ1dHRvbk9wZW5Qb3B1cFByb2ZpbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKHBvcHVwU2F2ZVByb2ZpbGUuZ2V0VXNlckluZm8oKSk7XG4gICAgdmFsaWRhdGVQcm9maWxlLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuICB9KTtcblxuICBidXR0b25PcGVuUG9wdXBDYXJkcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB2YWxpZGF0ZUNhcmRzLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHBvcHVwQ2FyZEFkZC5vcGVuKCk7XG4gIH0pO1xuXG4gIGJ1dHRvbk9wZW5Qb3B1cEF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB2YWxpZGF0ZUF2YXRhci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBwb3B1cEVkaXRBdmF0YXIub3BlbigpO1xuICB9KTtcblxuICBkZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcbn0pXG4uY2F0Y2goKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhlcnIpO1xufSk7XG4iXSwibmFtZXMiOlsiQXBpIiwiY29uZmlnIiwidGhpcyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXIiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiZGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0Iiwic3ViTmFtZSIsImxpbmsiLCJpZCIsImF2YXRhciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnV0dG9tIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yIiwidGV4dENvbnRlbnQiLCJzcGFuRXJyb3IiLCJyZW1vdmUiLCJidXR0b25FbGVtZW50IiwiYnV0dG9uVmFsaWQiLCJidXR0b25JbnZhbGlkIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXRMaXN0IiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uIiwiX2FjdGl2YXRlQnV0dG9uIiwic29tZSIsIkNhcmQiLCJzZWxlY3RvclRlbXBsYXRlIiwiaXRlbSIsInVzZXJEYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiYWRkTGlrZUNsaWNrIiwicmVtb3ZlTGlrZUNsaWNrIiwiaGFuZGxlRGVsaXRlSWNvbkNsaWNrIiwiX2NhcmQiLCJfcHJvZmlsZUlkIiwiX2lkIiwiX3RlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxpdGVJY29uQ2xpY2siLCJfYWRkTGlrZUNsaWNrIiwiX3JlbW92ZUxpa2VDbGljayIsIl9lbGVtZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRJbWFnZSIsIl9kZWxpdGVJY29uIiwiX2xpa2UiLCJfbGlrZU51bWJlciIsInNyYyIsImFsdCIsIl9yZW5kZXJMaWtlIiwiX3JlbmRlckxpa2VOdW1iZXIiLCJfcmVtb3ZlRGVsaXRlSWNvbiIsImxpa2VzIiwibGVuZ3RoIiwiX2hhbmRsZUxpa2VDbGljayIsImNvbnRhaW5zIiwidG9nZ2xlIiwidG9nZ2xlTGlrZSIsIm93bmVyIiwiX3NldEV2ZW50RGVsaXRlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2J1dHRvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJpc0xvYWRpbmciLCJkZWZhdWx0VGV4dCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwiX3N1Ym1pdEZvcm0iLCJfZm9ybSIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJmb3JtVmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwSW1hZ2VJbWFnZSIsInBvcHVwSW1hZ2VUaXRsZSIsIlVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlU3ViTmFtZSIsInByb2ZpbGVBdmF0YXIiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZVN1Yk5hbWUiLCJfcHJvZmlsZUF2YXRhciIsIlBvcHVwV2l0aFN1Ym1pdCIsIl9jYXJkRWxlbWVudCIsImNhcmQiLCJmb3JtIiwiZm9ybUNhcmRBZGQiLCJidXR0b25PcGVuUG9wdXBQcm9maWwiLCJidXR0b25PcGVuUG9wdXBDYXJkcyIsImJ1dHRvbk9wZW5Qb3B1cEF2YXRhciIsInBvcHVwUHJvZmlsZSIsInBvcHVwQ2FyZHMiLCJwb3B1cEF2YXRhciIsInZhbGlkYXRlUHJvZmlsZSIsInZhbGlkYXRlQ2FyZHMiLCJ2YWxpZGF0ZUF2YXRhciIsImVuYWJsZVZhbGlkYXRpb24iLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0SW5pdGlhbFByb2ZpbGUiLCJnZXRJbml0aWFsQ2FyZCIsImNhcmRzIiwicG9wdXBTYXZlUHJvZmlsZSIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwicG9wdXBFZGl0UHJvZmlsZSIsInJlbmRlckxvYWRpbmciLCJwYXRjaFByb2ZpbGUiLCJnZXRJbnB1dFZhbHVlcyIsInJlc3VsdCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwQ2FyZEFkZCIsImFkZE5ld0NhcmQiLCJkZWZhdWx0Q2FyZExpc3QiLCJyZW5kZXJJdGVtIiwicG9wdXBEZWxpdGVDYXJkIiwiZGVsaXRlQ2FyZCIsImdldElkQ2FyZCIsImdldENhcmRFbGVtZW50IiwicG9wdXBFZGl0QXZhdGFyIiwicGF0Y2hBdmF0YXIiLCJjYXJkQ2xpY2siLCJvcGVuIiwiYWRkTGlrZSIsInJlbmRlck51bWJlckxpa2UiLCJkZWxpdGVMaWtlIiwic2V0Q2FyZCIsImNsb3Nlc3QiLCJjYXJkRWxlbWVudCIsInJlbmRlckNhcmRzIiwic2V0SXRlbSIsInNldElucHV0VmFsdWVzIiwiZ2V0VXNlckluZm8iLCJyZXNldFZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=